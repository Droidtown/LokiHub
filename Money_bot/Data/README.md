# README (1)

# 錢記 Money_bot

## 簡介

只要輸入一句話，例如「昨天花了150元搭計程車」，錢記就能自動辨識日期、收支、金額與類別，快速完成記帳。支援查詢、刪除與報表，讓你用最輕鬆的方式，養成理財好習慣！

## 目錄

- [環境設定](about:blank#%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A)
- [建立Discord機器人](about:blank#%E5%BB%BA%E7%AB%8BDiscord%E6%A9%9F%E5%99%A8%E4%BA%BA)
- [使用者輸入範例](about:blank#%E4%BD%BF%E7%94%A8%E8%80%85%E8%BC%B8%E5%85%A5%E7%AF%84%E4%BE%8B)
- [更新資料庫](about:blank#%E6%9B%B4%E6%96%B0%E8%B3%87%E6%96%99%E5%BA%AB)
- [相關Repositories](about:blank#%E7%9B%B8%E9%97%9CRepositories)
- [作者](about:blank#%E4%BD%9C%E8%80%85)

## 環境設定

```
本專案使用的 python 版本為 3.8+
```

### A.  將Money_bot資料夾中的內容Pull下來

### B. 於終端機安裝本專案所需的模組

- ArticutAPI
    
    ```
    pip install ArticutAPI
    ```
    
- Requests
    
    ```
    pip install Requests
    ```
    
- Discord
    
    
    ```
    pip install discord.py
    ```
    

### C. 建立Loki專案

1. 請至[卓騰語言科技](https://api.droidtown.co/)官方網站註冊帳號並登入頁面（畫面右上方）。
    
    ![截圖 2025-08-31 晚上8.37.39.png](README%20(1)%202606406ac93280388ce2edea3e9b60d0/%E6%88%AA%E5%9C%96_2025-08-31_%E6%99%9A%E4%B8%8A8.37.39.png)
    
2. 登入後，由畫面右上方的**會員**>**服務資訊** 進入 **Loki** 頁面，並點擊**開始使用Loki**
    
    ![截圖 2025-08-31 晚上8.50.56.png](README%20(1)%202606406ac93280388ce2edea3e9b60d0/%E6%88%AA%E5%9C%96_2025-08-31_%E6%99%9A%E4%B8%8A8.50.56.png)
    
3. 於**專案名稱**一欄輸入 Money_add ，並點擊**建立專案**
4. 進入該專案後，使用**匯入意圖**的功能，匯入ref資料夾中的檔案。
5. 匯入完成後回到專案列表的頁面點擊複製取得**loki_key**。
    
    ![截圖 2025-08-31 晚上9.18.32.png](README%20(1)%202606406ac93280388ce2edea3e9b60d0/%E6%88%AA%E5%9C%96_2025-08-31_%E6%99%9A%E4%B8%8A9.18.32.png)
    
6. 複製loki_key以後，將金鑰貼入Money_add/Account.info中的`"loki_key" = ""`。
`"username" = ""`填入註冊的email。
7. 回到第一部的介面、點選Articut、複製API金鑰，並將其填入Account.info中的`"api_key" = ""`

### D. 建立Discord機器人

建立Discord機器人你需要帳號、伺服器以及機器人

1. 建立Discord帳號並且登入後，在頁面的左側按 **+** ，建立自己的伺服器。
2. 由使用者設定>進階>開啟開發者模式
3. 右鍵點擊伺服器圖案、複製伺服器ID，並填入Account.info中的`"server_id" = ""`
4. 到[Discord Developer Portal－My Applications](https://discord.com/developers/applications) 的頁面，按右上角的**New Application**，建立新的APP。
5. 按頁面左側的Bot，並創建一個bot。
6. 點擊 Reset Token 、複製 discord_token，並將其填入Account.info中的`"discord_token" = ""`
7. 接下來按左側的**OAuth2**，在下方的**SCOPES**中選擇**Bot。**在網頁下方會得到一個網址。將網址貼近瀏覽器中就可以把機器人加入自己的伺服器囉！
8. 運用終端機執行`MoneyBot_Discord.py`，你的機器人就正式上工了！

## 使用者輸入範例

在Discord的輸入欄輸入「/」即可看到機器人的指令選單。

![截圖 2025-08-31 晚上9.49.07.png](README%20(1)%202606406ac93280388ce2edea3e9b60d0/%E6%88%AA%E5%9C%96_2025-08-31_%E6%99%9A%E4%B8%8A9.49.07.png)

- `/add <text>` 新增紀錄
    
    ```
    /add 昨天花了150元搭計程車
    ```
    
    ```
    {user_name}新增紀錄：
    
        日期        收支    類別       事項           數量        金額
    --------------------------------------------------------------------------------
    2025-08-28   支出    交通       計程車             1           -150
          原始輸入：昨天花了150元搭計程車
    --------------------------------------------------------------------------------
    ```
    
- `/view` 檢視全部紀錄
    
    ```
    /view
    ```
    
    ```
    {user_name}的記帳紀錄：
    
        日期        收支    類別       事項           數量        金額
    --------------------------------------------------------------------------------
    1   2025-08-25   支出    飲食       咖啡             1            -65
    2   2025-08-28   支出    交通       計程車           1           -150
    3   2025-08-28   收入    薪資       薪水             1         30,000
    --------------------------------------------------------------------------------
    💰 總收入：       30,000 元
    💸 總支出：         -215 元
    📊 收支差額：     29,785 元
    ```
    
- `/view <text>` 搜尋紀錄
    
    ```
    /view 8月的花了多少錢在吃的？
    ```
    
    ```
    {user_name}的記帳紀錄：
    (8月的花了多少錢在吃的？)
    「時間：2025-08 / 收支：支出 / 類別：飲食」
    
        日期        收支    類別       事項           數量        金額
    --------------------------------------------------------------------------------
    1   2025-08-25   支出    飲食       咖啡           1            -65
    --------------------------------------------------------------------------------
    💰 總收入：            0 元
    💸 總支出：          -65 元
    📊 收支差額：        -65 元
    
    ```
    
- `/delete <index>` 刪除特定紀錄
- `/report <text> <text>` 回報錯誤
- `/help` 協助

## 注意事項

1. 新增紀錄必須同時包含 **金額** 與 **事項**，否則會失敗。
2. 收入或支出及類別的判定是由LLM進行，因此不穩定
3. 每位使用者會有自己的紀錄檔，不會與其他人混淆。
4. 每次只能處理一筆紀錄，請不要在同一句輸入多個消費或收入。
5. 如果句子無法正確解析，請用 `/report` 回報，改善模型。
6. 請先用 `/view` 查詢編號，再輸入 `/delete <index>` 來刪除。

## 作者

Email: weicheng911011@gmail.com

歡迎提出建言或是提出反饋！